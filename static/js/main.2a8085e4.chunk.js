(this["webpackJsonpsn-ts"]=this["webpackJsonpsn-ts"]||[]).push([[0],{13:function(e,t,s){e.exports={photo:"users_photo__1939q",body:"users_body__1BkUf",logo:"users_logo__3h-J1",content:"users_content__2sBhk",selectPage:"users_selectPage__u6k5m"}},18:function(e,t,s){e.exports={appWrapper:"App_appWrapper__-H9Bl",appWrapperBody:"App_appWrapperBody__17-NL",appWrapperContent:"App_appWrapperContent__28hHb"}},19:function(e,t,s){e.exports={dialogs:"Dialogs_dialogs__1UP72",user:"Dialogs_user__2VYq4",message:"Dialogs_message__m7sKS"}},23:function(e,t,s){e.exports={header:"Header_header__3Ga8t",loginBlock:"Header_loginBlock__1_uRS"}},36:function(e,t,s){e.exports={profile:"Profile_profile__v3zZh"}},37:function(e,t,s){e.exports={item:"Post_item__tNvQl"}},38:function(e,t,s){e.exports={pospt:"MyPosts_pospt__pjcEZ"}},43:function(e,t,s){},7:function(e,t,s){e.exports={nav:"Nav_nav__3BN7b",item:"Nav_item__24uj9",active:"Nav_active__rsa6L"}},72:function(e,t,s){"use strict";s.r(t);var n=s(1),c=s.n(n),a=(s(43),function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,73)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,r=t.getTTFB;s(e),n(e),c(e),a(e),r(e)}))}),r=s(17),i=s.n(r),o=s(18),u=s.n(o),l=s(7),j=s.n(l),d=s(4),b=s(0),p=function(){return Object(b.jsxs)("nav",{className:j.a.nav,children:[Object(b.jsx)("div",{className:j.a.item,children:Object(b.jsx)(d.b,{to:"/profile",className:function(e){return e.isActive?j.a.active:""},children:"Profile"})}),Object(b.jsx)("div",{className:j.a.item,children:Object(b.jsx)(d.b,{to:"/dialogs",className:function(e){return e.isActive?j.a.active:""},children:"Messages"})}),Object(b.jsx)("div",{className:j.a.item,children:Object(b.jsx)(d.b,{to:"/news",className:function(e){return e.isActive?j.a.active:""},children:"News"})}),Object(b.jsx)("div",{className:j.a.item,children:Object(b.jsx)(d.b,{to:"/music",className:function(e){return e.isActive?j.a.active:""},children:"Music"})}),Object(b.jsx)("div",{className:j.a.item,children:Object(b.jsx)(d.b,{to:"/users",className:function(e){return e.isActive?j.a.active:""},children:" Users"})}),Object(b.jsx)("div",{className:j.a.item,children:Object(b.jsx)(d.b,{to:"/settings",className:function(e){return e.isActive?j.a.active:""},children:" Settings"})})]})},f=s(2),O=function(){return Object(b.jsx)("div",{children:"News"})},g=function(){return Object(b.jsx)("div",{children:"Music"})},h=function(){return Object(b.jsx)("div",{children:"Settings."})},x=s(19),m=s.n(x),v=function(e){return Object(b.jsx)("div",{children:e.message})},P=function(e){var t="/dialogs/"+e.id;return Object(b.jsx)("div",{children:Object(b.jsx)(d.b,{to:t,children:e.name})})},T=s(12),_=s(3),N={messages:[{id:1,message:"Hello"},{id:2,message:"How are you?"},{id:3,message:":)"}],dialogs:[{id:1,name:"Ed"},{id:2,name:"Viktoria"},{id:3,name:"Ned"},{id:4,name:"Varova"}],newMessageText:""},w=s(5),E=Object(w.b)((function(e){return{messagesPage:e.messagesPage,isAuth:e.auth.isAuth}}),(function(e){return{addMessage:function(){e({type:"ADD-MESSAGE"})},onChangeHandler:function(t){e({type:"UPDATE-NEW-MESSAGE-TEXT",newMessage:t})}}}))((function(e){var t=e.messagesPage.dialogs.map((function(e){return Object(b.jsx)(P,{name:e.name,id:e.id})})),s=e.messagesPage.messages.map((function(e){return Object(b.jsx)(v,{message:e.message})})),c=Object(f.f)();return Object(n.useEffect)((function(){if(!e.isAuth)return c("/login")})),Object(b.jsxs)("div",{className:m.a.dialogs,children:[Object(b.jsx)("div",{className:m.a.user,children:t}),Object(b.jsxs)("div",{className:m.a.message,children:[s,Object(b.jsx)("textarea",{placeholder:"Enter your message...",value:e.messagesPage.newMessageText,onChange:function(t){e.onChangeHandler(t.currentTarget.value)}}),Object(b.jsx)("button",{onClick:function(){e.addMessage()},children:"Add message"})]})]})})),S=s(33),A=s(34),C=s(41),y=s(40),I=s(13),k=s.n(I),U=s.p+"static/media/user.d393fa70.png",F=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),s=[],n=[],c=1;c<=t;c++)s.push(c);for(var a=1;a<=10;a++)n.push(a);return Object(b.jsxs)("div",{children:[n.map((function(t){return Object(b.jsx)("button",{onClick:function(){return e.onPageChanged(t)},className:e.currentPage===t?k.a.selectPage:"",disabled:e.currentPage===t,children:t})})),e.users.map((function(t){return Object(b.jsxs)("div",{className:k.a.body,children:[Object(b.jsxs)("div",{className:k.a.logo,children:[Object(b.jsx)("div",{children:Object(b.jsx)(d.b,{to:"/profile/"+t.id,children:Object(b.jsx)("img",{src:null!==t.photos.small?t.photos.small:U,alt:"ava",className:k.a.photo})})}),Object(b.jsx)("div",{children:t.followed?Object(b.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.unFollowThunk(t.id)},children:"Unfollow"}):Object(b.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.followThunk(t.id)},children:"Follow"})})]}),Object(b.jsx)("div",{className:k.a.content,children:Object(b.jsxs)("div",{children:["Name: ",t.name]})})]},t.id)}))]})},L=s(35),D=s.n(L).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"ba634933-a40a-488e-bf8b-9720d0155fba"}}),M=function(e,t){return D.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},G=function(){return D.get("auth/me").then((function(e){return e.data}))},W=function(e){return D.delete("follow/".concat(e)).then((function(e){return e.data}))},R=function(e){return D.post("follow/".concat(e)).then((function(e){return e.data}))},B=function(e){return D.get("profile/".concat(e))},H={users:[],pageSize:6,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},z=function(e){return{type:"TOGGLE-IS-FETCHING",status:e}},q=function(e,t){return{type:"TOGGLE-IS-FOLLOWING",isFetching:e,userId:t}},J=s.p+"static/media/loader.0ecd8fea.svg",V=function(){return Object(b.jsx)("div",{children:Object(b.jsx)("img",{src:J,alt:"loader"})})},K=function(e){Object(C.a)(s,e);var t=Object(y.a)(s);function s(){var e;Object(S.a)(this,s);for(var n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).onPageChanged=function(t){e.props.setCurrentPage(t),e.props.getUsers(e.props.currentPage,e.props.pageSize)},e}return Object(A.a)(s,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(b.jsx)(b.Fragment,{children:this.props.isFetching?Object(b.jsx)(V,{}):Object(b.jsx)(F,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,followingInProgress:this.props.followingInProgress,followThunk:this.props.followThunk,unFollowThunk:this.props.unFollowThunk})})}}]),s}(c.a.Component),Q=Object(w.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress}}),{setCurrentPage:function(e){return{type:"SET-CURRENT-PAGE",currentPage:e}},toggleIsFollowing:q,getUsers:function(e,t){return function(s){s(z(!0)),M(e,t).then((function(e){s(z(!1)),s(function(e){return{type:"SET-USERS",users:e}}(e.items)),s({type:"SET-TOTAL-COUNT",totalUsersCount:e.totalCount})}))}},followThunk:function(e){return function(t){t(q(!0,e)),R(e).then((function(s){0===s.resultCode&&t({type:"FOLLOW",userID:e}),t(q(!1,e))}))}},unFollowThunk:function(e){return function(t){t(q(!0,e)),W(e).then((function(s){0===s.resultCode&&t({type:"UNFOLLOW",userID:e}),t(q(!1,e))}))}}})(K),X=s(36),Z=s.n(X),Y=s(9),$=s.n(Y),ee=s(10),te=function(e){var t=Object(n.useState)({editMode:!1}),s=Object(ee.a)(t,2),c=s[0],a=s[1];return Object(b.jsx)(b.Fragment,{children:c.editMode?Object(b.jsx)("div",{children:Object(b.jsx)("input",{value:e.status,onBlur:function(){a({editMode:!1})},autoFocus:!0})}):Object(b.jsx)("div",{children:Object(b.jsx)("span",{onDoubleClick:function(){a({editMode:!0})},children:e.status})})})},se=function(e){return e.profile?Object(b.jsx)("div",{children:Object(b.jsxs)("div",{className:$.a.body,children:[Object(b.jsx)("div",{className:$.a.photo,children:Object(b.jsx)("img",{src:e.profile.photos.large,alt:"img"})}),Object(b.jsxs)("div",{className:$.a.info,children:[Object(b.jsxs)("span",{children:[Object(b.jsx)("span",{className:$.a.title,children:"Name : "})," ",e.profile.fullName]}),Object(b.jsxs)("span",{children:[Object(b.jsx)("span",{className:$.a.title,children:" About me : "})," ",e.profile.aboutMe]}),Object(b.jsxs)("span",{children:[Object(b.jsx)("span",{className:$.a.title,children:" Looking for a job : "})," ",e.profile.lookingForAJobDescription]}),Object(b.jsxs)("span",{children:[Object(b.jsx)("span",{className:$.a.title,children:" My contacts :"}),Object(b.jsxs)("div",{className:$.a.contacts,children:[Object(b.jsxs)("li",{children:[" Facebook: ",e.profile.contacts.facebook]}),Object(b.jsxs)("li",{children:[" Twitter: ",e.profile.contacts.twitter]}),Object(b.jsxs)("li",{children:[" VK: ",e.profile.contacts.vk]}),Object(b.jsxs)("li",{children:[" Github: ",e.profile.contacts.github]})]})]})]}),Object(b.jsx)(te,{status:"Hello"})]})}):Object(b.jsx)(V,{})},ne=s(37),ce=s.n(ne),ae=function(e){return Object(b.jsx)("div",{children:Object(b.jsxs)("div",{className:ce.a.item,children:[Object(b.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTvWNvxqwJyqQtJQLKuWSGDQaxDG0JQ1LHbV_ffZ1qdFc85UtnfLu1D2IbsKPdIqnUtyE8&usqp=CAU",alt:"ava"}),e.message,Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{children:"Like"})," ",e.likescount]})]})})},re=s(38),ie=s.n(re),oe={posts:[{id:1,message:"Hi, how are you??",likescount:3},{id:2,message:"It's my first post",likescount:15}],newPostText:"",profile:null},ue=Object(w.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),(function(e){return{updateNewPostText:function(t){e({type:"UPDATE-NEW-POST-TEXT",newText:t})},addPost:function(){e({type:"ADD-POST"})}}}))((function(e){var t=e.posts.map((function(e){return Object(b.jsx)(ae,{message:e.message,likescount:e.likescount})}));return Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{children:"My posts"}),Object(b.jsxs)("div",{children:[Object(b.jsx)("textarea",{placeholder:"Enter your post",value:e.newPostText,onChange:function(t){e.updateNewPostText(t.currentTarget.value)}}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{onClick:function(){e.addPost()},children:"Add Post"})})]}),Object(b.jsx)("div",{className:ie.a.pospt,children:t})]})})),le=function(e){return Object(b.jsxs)("div",{className:Z.a.profile,children:[Object(b.jsx)(se,{profile:e.profile}),Object(b.jsx)(ue,{})]})},je=function(){var e=Object(w.d)((function(e){return e.profilePage})),t=Object(w.d)((function(e){return e.auth})),s=Object(w.c)(),c=Object(f.g)().userId;c||(c="21580");var a=Object(f.f)();return Object(n.useEffect)((function(){if(!t.isAuth)return a("/login")})),Object(n.useEffect)((function(){!function(e,t){B(e).then((function(e){t({type:"SET-USER-PROFILE",profile:e.data})}))}(c,s)}),[c,s]),Object(b.jsx)("div",{children:Object(b.jsx)(le,{profile:e.profile})})},de=s(23),be=s.n(de),pe=s.p+"static/media/logo.5b128dcd.png",fe=function(e){return Object(b.jsxs)("header",{className:be.a.header,children:[Object(b.jsx)("img",{src:pe,alt:"logo"}),Object(b.jsx)("div",{className:be.a.loginBlock,children:e.state.isAuth?"Logout":Object(b.jsx)(d.b,{to:"/login",children:"Login"})})]})},Oe={id:null,login:null,email:null,isAuth:!1},ge=function(){var e=Object(w.d)((function(e){return e.auth})),t=Object(w.c)();return Object(n.useEffect)((function(){!function(e){G().then((function(t){if(0===t.resultCode){var s=t.id,n=t.login,c=t.email;e(function(e,t,s){return{type:"SET-USER-DATA",data:{userId:e,email:t,login:s}}}(s,c,n))}}))}(t)})),Object(b.jsx)(fe,{state:e})},he=function(){return Object(b.jsx)("h1",{children:"Login."})},xe=function(){return Object(b.jsxs)("div",{className:u.a.appWrapper,children:[Object(b.jsx)(ge,{}),Object(b.jsxs)("div",{className:u.a.appWrapperBody,children:[Object(b.jsx)(p,{}),Object(b.jsx)("div",{className:u.a.appWrapperContent,children:Object(b.jsxs)(f.c,{children:[Object(b.jsx)(f.a,{path:"/login",element:Object(b.jsx)(he,{})}),Object(b.jsx)(f.a,{path:"/",element:Object(b.jsx)(je,{})}),Object(b.jsx)(f.a,{path:"/profile/",element:Object(b.jsx)(je,{})}),Object(b.jsx)(f.a,{path:"/profile/:userId",element:Object(b.jsx)(je,{})}),Object(b.jsx)(f.a,{path:"/dialogs/*",element:Object(b.jsx)(E,{})}),Object(b.jsx)(f.a,{path:"/news",element:Object(b.jsx)(O,{})}),Object(b.jsx)(f.a,{path:"/music",element:Object(b.jsx)(g,{})}),Object(b.jsx)(f.a,{path:"/settings",element:Object(b.jsx)(h,{})}),Object(b.jsx)(f.a,{path:"/users",element:Object(b.jsx)(Q,{})})]})})]})]})},me=s(20),ve=s(39),Pe=Object(me.b)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var s={id:5,message:e.newPostText,likescount:0},n=Object(_.a)({},e);return n.posts=Object(T.a)(e.posts),n.posts.push(s),n.newPostText="",n;case"UPDATE-NEW-POST-TEXT":var c=Object(_.a)({},e);return c.newPostText=t.newText,c;case"SET-USER-PROFILE":return Object(_.a)(Object(_.a)({},e),{},{profile:t.profile});default:return e}},messagesPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-MESSAGE":var s={id:4,message:e.newMessageText},n=Object(_.a)({},e);return n.messages=Object(T.a)(e.messages),n.messages.push(s),n.newMessageText="",n;case"UPDATE-NEW-MESSAGE-TEXT":var c=Object(_.a)({},e);return c.newMessageText=t.newMessage,c;default:return e}},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(_.a)(Object(_.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userID?Object(_.a)(Object(_.a)({},e),{},{followed:!0}):e}))});case"UNFOLLOW":return Object(_.a)(Object(_.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userID?Object(_.a)(Object(_.a)({},e),{},{followed:!1}):e}))});case"SET-USERS":return Object(_.a)(Object(_.a)({},e),{},{users:t.users});case"SET-CURRENT-PAGE":return Object(_.a)(Object(_.a)({},e),{},{currentPage:t.currentPage});case"SET-TOTAL-COUNT":return Object(_.a)(Object(_.a)({},e),{},{totalUsersCount:t.totalUsersCount});case"TOGGLE-IS-FETCHING":return Object(_.a)(Object(_.a)({},e),{},{isFetching:t.status});case"TOGGLE-IS-FOLLOWING":return Object(_.a)(Object(_.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(T.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-USER-DATA":return Object(_.a)(Object(_.a)(Object(_.a)({},e),t.data),{},{isAuth:!0});default:return e}}}),Te=Object(me.c)(Pe,Object(me.a)(ve.a));i.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(d.a,{children:Object(b.jsx)(w.a,{store:Te,children:Object(b.jsx)(xe,{})})})}),document.getElementById("root")),a()},9:function(e,t,s){e.exports={photo:"ProfileInfo_photo__yWC2V",body:"ProfileInfo_body__1T_AO",info:"ProfileInfo_info__21Ax0",title:"ProfileInfo_title__2kSSe"}}},[[72,1,2]]]);
//# sourceMappingURL=main.2a8085e4.chunk.js.map